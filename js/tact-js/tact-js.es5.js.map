{"version":3,"file":"tact-js.es5.js","sources":["../src/Interfaces.ts","../src/PlayerSocket.ts","../src/HapticPlayer.ts","../src/tact-js.ts"],"sourcesContent":["export interface DotPoint {\n  index: number;\n  intensity: number;\n}\n\nexport interface PathPoint {\n  x: number;\n  y: number;\n  intensity: number;\n}\n\n\nexport interface ScaleOption {\n  intensity: number;\n  duration: number;\n}\n\n\nexport interface RotationOption {\n  offsetAngleX: number;\n  offsetY: number;\n}\n\n\nexport enum PositionType {\n  VestFront = 'VestFront',\n  VestBack = 'VestBack',\n  Head = 'Head',\n  ForearmL = 'ForearmL',\n  ForearmR = 'ForearmR',\n}\n\n\nexport enum ErrorCode {\n  SUCCESS,\n  MESSAGE_NOT_DEFINED,\n  CONNECTION_NOT_ESTABLISHED,\n  FAILED_TO_SEND_MESSAGE,\n  MESSAGE_INVALID,\n  MESSAGE_INVALID_DURATION_MILLIS,\n\n  MESSAGE_INVALID_DOT_INDEX_HEAD,\n  MESSAGE_INVALID_DOT_INDEX_ARM,\n  MESSAGE_INVALID_DOT_INDEX_VEST,\n\n  MESSAGE_INVALID_INTENSITY,\n  MESSAGE_INVALID_X,\n  MESSAGE_INVALID_Y,\n  MESSAGE_INVALID_ROTATION_X,\n  MESSAGE_INVALID_ROTATION_Y,\n  MESSAGE_INVALID_SCALE_INTENSITY_RATIO,\n  MESSAGE_INVALID_SCALE_DURATION_RATIO,\n  MESSAGE_NOT_REGISTERED_KEY,\n}\n\n","import { ErrorCode } from './Interfaces'\n\nconst DEFAULT_URL= 'ws://127.0.0.1:15881/v2/feedbacks?app_id=com.bhaptics.designer2&app_name=bHaptics Designer';\n\nexport enum STATUS {\n  CONNECTING = 'Connecting',\n  CONNECTED ='Connected',\n  DISCONNECT = 'Disconnected',\n}\n\nconst DEFAULT_RETRY_CONNECT_TIME = 5000;\n\nexport interface Message {\n  status: STATUS;\n  message: any;\n}\n\nexport default class PlayerSocket {\n  private handlers: Function[] = [];\n  private websocketClient: any;\n  private currentStatus: STATUS;\n  private message: any;\n  private isTriggered = false;\n\n  retryConnectTime: number;\n\n  constructor(retryConnectTime = DEFAULT_RETRY_CONNECT_TIME) {\n    this.message = {};\n    this.retryConnectTime = retryConnectTime;\n    this.currentStatus = STATUS.DISCONNECT;\n  }\n\n  public addListener = (func: (msg: Message) => void) => {\n    this.handlers.push(func);\n  };\n\n  private emit = (msg: Message) => {\n    this.handlers.forEach(func => {\n      func(msg);\n    })\n  };\n\n  connect = () => {\n    try  {\n      this.websocketClient = new WebSocket(DEFAULT_URL);\n    } catch (e) {\n      // connection failed\n      console.log('PlayerSocket', e);\n      return;\n    }\n\n    this.websocketClient.onopen = () => {\n      this.currentStatus = STATUS.CONNECTED;\n      this.emit( {\n        status: this.currentStatus,\n        message: this.message,\n      });\n    };\n\n    this.websocketClient.onmessage = (result: any) => {\n      if (JSON.stringify(this.message) === result.data) {\n        return;\n      }\n\n      this.message = JSON.parse(result.data);\n      this.emit({\n        status: this.currentStatus,\n        message: this.message,\n      });\n    };\n\n    this.websocketClient.onclose = (event: any) => {\n      this.currentStatus = STATUS.DISCONNECT;\n      this.emit( {\n        status: this.currentStatus,\n        message: this.message,\n      });\n      setTimeout(() => {\n        this.connect();\n      }, this.retryConnectTime);\n    };\n\n    this.currentStatus = STATUS.CONNECTING;\n    this.emit({\n      status: this.currentStatus,\n      message: this.message,\n    });\n  };\n\n  send = (message: string): ErrorCode => {\n    if (message === undefined) {\n      return ErrorCode.CONNECTION_NOT_ESTABLISHED;\n    }\n\n    if (!this.isTriggered) {\n      this.isTriggered = true;\n      this.connect();\n      return ErrorCode.CONNECTION_NOT_ESTABLISHED;\n    }\n\n    if (this.websocketClient === undefined) {\n      return ErrorCode.CONNECTION_NOT_ESTABLISHED;\n    }\n\n    if (this.currentStatus !== STATUS.CONNECTED) {\n      return ErrorCode.CONNECTION_NOT_ESTABLISHED;\n    }\n\n    try {\n      this.websocketClient.send(message);\n      return ErrorCode.SUCCESS;\n    } catch (e) {\n      // sending failed\n\n      return ErrorCode.FAILED_TO_SEND_MESSAGE;\n    }\n  }\n}\n\n","import PlayerSocket, { Message } from './PlayerSocket'\nimport {\n  DotPoint,\n  ErrorCode,\n  PathPoint,\n  PositionType,\n  RotationOption,\n  ScaleOption\n} from './Interfaces'\n\nclass HapticPlayer {\n  registeredKeys: string[] = []\n  socket: PlayerSocket;\n  constructor() {\n    this.socket = new PlayerSocket();\n    this.addListener((msg => {\n      if (msg.message.RegisteredKeys) {\n        this.registeredKeys = msg.message.RegisteredKeys;\n      }\n    }))\n  }\n\n  public addListener = (func: (msg: Message) => void) => {\n    this.socket.addListener(func);\n  };\n\n  public turnOff = (key: string) :ErrorCode => {\n    const request = {\n      Submit :[{\n        Type : 'turnOff',\n        Key : key,\n      }],\n    };\n    return this.socket.send(JSON.stringify(request));\n  };\n\n  public turnOffAll = () : ErrorCode => {\n    const request = {\n      Submit :[{\n        Type : 'turnOffAll',\n      }],\n    };\n    return this.socket.send(JSON.stringify(request));\n  };\n\n  public submitDot = (key: string,\n                      pos: PositionType,\n                      dotPoints: DotPoint[],\n                      durationMillis: number) : ErrorCode => {\n    if (isNaN(durationMillis)) {\n      return ErrorCode.MESSAGE_INVALID_DURATION_MILLIS;\n    }\n\n    if (durationMillis < 20 || durationMillis > 100000) {\n      return ErrorCode.MESSAGE_INVALID_DURATION_MILLIS;\n    }\n\n    if (dotPoints === undefined) {\n      return ErrorCode.MESSAGE_INVALID;\n    }\n\n    for (let i = 0; i < dotPoints.length; i++) {\n      const point = dotPoints[i];\n\n\n      switch (pos) {\n        case PositionType.ForearmL:\n        case PositionType.ForearmR:\n          if (isNaN(point.index)) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_ARM;\n          }\n\n          if (point.index < 0 || point.index >= 6) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_ARM;\n          }\n          break;\n        case PositionType.Head:\n          if (isNaN(point.index)) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_HEAD;\n          }\n\n          if (point.index < 0 || point.index >= 6) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_HEAD;\n          }\n          break;\n        case PositionType.VestBack:\n        case PositionType.VestFront:\n          if (isNaN(point.index)) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_VEST;\n          }\n\n          if (point.index < 0 || point.index >= 20) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_VEST;\n          }\n          break;\n      }\n\n      if (isNaN(point.intensity)) {\n        return ErrorCode.MESSAGE_INVALID_INTENSITY;\n      }\n\n      if (point.intensity < 0 || point.intensity > 100) {\n        return ErrorCode.MESSAGE_INVALID_INTENSITY;\n      }\n    }\n\n    const request = {\n      Submit :[{\n        Type : 'frame',\n        Key : key,\n        Frame : {\n          Position : pos,\n          PathPoints: [],\n          DotPoints : dotPoints,\n          DurationMillis : durationMillis,\n        },\n      }],\n    };\n\n    return this.socket.send(JSON.stringify(request, (k, val) =>\n      val.toFixed ? Number(val.toFixed(3)) : val\n    ));\n  };\n\n  public submitPath = (key: string,\n                pos: PositionType,\n                pathPoints: PathPoint[],\n                durationMillis: number) : ErrorCode => {\n\n    if (isNaN(durationMillis)) {\n      return ErrorCode.MESSAGE_INVALID_DURATION_MILLIS;\n    }\n\n    if (durationMillis < 20 || durationMillis > 100000) {\n      return ErrorCode.MESSAGE_INVALID_DURATION_MILLIS;\n    }\n\n    if (pathPoints === undefined) {\n      return ErrorCode.MESSAGE_INVALID;\n    }\n\n    for (let i = 0; i < pathPoints.length; i++) {\n      const point = pathPoints[i];\n\n      if (isNaN(point.x)) {\n        return ErrorCode.MESSAGE_INVALID_X;\n      }\n\n      if (isNaN(point.y)) {\n        return ErrorCode.MESSAGE_INVALID_Y;\n      }\n\n      if (isNaN(point.intensity)) {\n        return ErrorCode.MESSAGE_INVALID_INTENSITY;\n      }\n\n      if (point.x < 0 || point.x > 1) {\n        return ErrorCode.MESSAGE_INVALID_X;\n      }\n\n      if (point.y < 0 || point.y > 1) {\n        return ErrorCode.MESSAGE_INVALID_Y;\n      }\n      if (point.intensity < 0 || point.intensity > 100) {\n        return ErrorCode.MESSAGE_INVALID_INTENSITY;\n      }\n    }\n\n\n    const request = {\n      Submit :[{\n        Type : 'frame',\n        Key : key,\n        Frame : {\n          Position : pos,\n          PathPoints : pathPoints,\n          DotPoints : [],\n          DurationMillis : durationMillis,\n        },\n      }],\n    };\n    return this.socket.send(JSON.stringify(request, (k, val) =>\n      val.toFixed ? Number(val.toFixed(3)) : val\n    ));\n  }\n\n  public registerFile = (key: string, json: string) : ErrorCode => {\n    const jsonData = JSON.parse(json);\n    const project = jsonData[\"project\"];\n    const request = {\n      Register: [{\n        Key: key,\n        project,\n      }]\n    };\n    return this.socket.send(JSON.stringify(request));\n  }\n\n  public submitRegistered = (key: string) : ErrorCode => {\n    if (this.registeredKeys.find(v => v === key) === undefined) {\n      return ErrorCode.MESSAGE_NOT_REGISTERED_KEY;\n    }\n\n\n    const request = {\n      Submit :[{\n        Type : 'key',\n        Key : key,\n      }],\n    };\n\n    return this.socket.send(JSON.stringify(request));\n  }\n\n  public submitRegisteredWithScaleOption = (key: string, scaleOption: ScaleOption) : ErrorCode => {\n    if (this.registeredKeys.find(v => v === key) === undefined) {\n      return ErrorCode.MESSAGE_NOT_REGISTERED_KEY;\n    }\n\n    if (isNaN(scaleOption.intensity)) {\n      return ErrorCode.MESSAGE_INVALID_SCALE_INTENSITY_RATIO;\n    }\n\n    if (scaleOption.intensity < 0.2 || scaleOption.intensity > 5) {\n      return ErrorCode.MESSAGE_INVALID_SCALE_INTENSITY_RATIO;\n    }\n\n    if (isNaN(scaleOption.duration)) {\n      return ErrorCode.MESSAGE_INVALID_SCALE_DURATION_RATIO;\n    }\n\n    if (scaleOption.duration < 0.2 || scaleOption.duration > 5) {\n      return ErrorCode.MESSAGE_INVALID_SCALE_DURATION_RATIO;\n    }\n\n    const request = {\n      Submit :[{\n        Type : 'key',\n        Key : key,\n        Parameters : {\n          scaleOption,\n        }\n      }],\n    };\n\n    return this.socket.send(JSON.stringify(request));\n  }\n\n  public submitRegisteredWithRotationOption = (key: string, rotationOption: RotationOption) : ErrorCode => {\n    if (this.registeredKeys.find(v => v === key) === undefined) {\n      return ErrorCode.MESSAGE_NOT_REGISTERED_KEY;\n    }\n\n    if (isNaN(rotationOption.offsetAngleX)) {\n      return ErrorCode.MESSAGE_INVALID_ROTATION_X;\n    }\n\n    if (rotationOption.offsetAngleX < 0 || rotationOption.offsetAngleX > 360) {\n      return ErrorCode.MESSAGE_INVALID_ROTATION_X;\n    }\n\n    if (isNaN(rotationOption.offsetY)) {\n      return ErrorCode.MESSAGE_INVALID_ROTATION_Y;\n    }\n\n    if (rotationOption.offsetY < -0.5 || rotationOption.offsetY > 0.5) {\n      return ErrorCode.MESSAGE_INVALID_ROTATION_Y;\n    }\n\n    const request = {\n      Submit :[{\n        Type : 'key',\n        Key : key,\n        Parameters : {\n          rotationOption,\n        }\n      }],\n    };\n\n    return this.socket.send(JSON.stringify(request));\n  }\n}\n\nexport default HapticPlayer;\n","import HapticPlayer from './HapticPlayer'\nimport { DotPoint, PathPoint, ScaleOption, RotationOption, PositionType, ErrorCode } from './Interfaces';\n\nconst tactJs = new HapticPlayer();\n\nexport default tactJs;\n\nclass TactJsUtils {\n  public static convertErrorCodeToString = (error: ErrorCode): string => {\n    switch (error) {\n      case ErrorCode.CONNECTION_NOT_ESTABLISHED:\n        return 'Connection is not established.'\n      case ErrorCode.FAILED_TO_SEND_MESSAGE:\n        return 'Failed to send a request to the bHaptics Player'\n      case ErrorCode.MESSAGE_NOT_DEFINED:\n        return 'Message is not defined';\n      case ErrorCode.MESSAGE_INVALID:\n        return 'Invalid input: Unknown';\n      case ErrorCode.MESSAGE_INVALID_DURATION_MILLIS:\n        return 'Invalid: durationMillis [20ms ~ 100,000ms]';\n      case ErrorCode.MESSAGE_INVALID_DOT_INDEX_VEST:\n        return 'Invalid: VestFront/Back index should be [0, 19]';\n      case ErrorCode.MESSAGE_INVALID_DOT_INDEX_ARM:\n        return 'Invalid: ArmLeft/Right index should be [0, 5]';\n      case ErrorCode.MESSAGE_INVALID_DOT_INDEX_HEAD:\n        return 'Invalid: Head index should be [0, 5]';\n      case ErrorCode.MESSAGE_INVALID_INTENSITY:\n        return 'Invalid: intensity should be [0, 100]';\n      case ErrorCode.MESSAGE_INVALID_X:\n        return 'Invalid: x should be [0, 1]';\n      case ErrorCode.MESSAGE_INVALID_Y:\n        return 'Invalid: y should be [0, 1]';\n      case ErrorCode.MESSAGE_INVALID_ROTATION_X:\n        return 'Invalid: rotationOffsetX should be [0, 360]';\n      case ErrorCode.MESSAGE_INVALID_ROTATION_Y:\n        return 'Invalid: offsetY should be [-0.5, 0.5]';\n      case ErrorCode.MESSAGE_INVALID_SCALE_INTENSITY_RATIO:\n        return 'Invalid: intensity should be [0.2, 5]';\n      case ErrorCode.MESSAGE_INVALID_SCALE_DURATION_RATIO:\n        return 'Invalid: duration should be [0.2, 5]';\n      case ErrorCode.MESSAGE_NOT_REGISTERED_KEY:\n        return 'Invalid: key not registered';\n      case ErrorCode.SUCCESS:\n        return 'Success';\n    }\n  }\n}\n\nexport {\n  DotPoint, PathPoint, ScaleOption, RotationOption, PositionType, ErrorCode, TactJsUtils\n}\n"],"names":[],"mappings":"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"}