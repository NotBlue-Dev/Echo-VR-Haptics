{"version":3,"file":"tact-js.umd.js","sources":["../src/Interfaces.ts","../src/PlayerSocket.ts","../src/HapticPlayer.ts","../src/tact-js.ts"],"sourcesContent":["export interface DotPoint {\n  index: number;\n  intensity: number;\n}\n\nexport interface PathPoint {\n  x: number;\n  y: number;\n  intensity: number;\n}\n\n\nexport interface ScaleOption {\n  intensity: number;\n  duration: number;\n}\n\n\nexport interface RotationOption {\n  offsetAngleX: number;\n  offsetY: number;\n}\n\n\nexport enum PositionType {\n  VestFront = 'VestFront',\n  VestBack = 'VestBack',\n  Head = 'Head',\n  ForearmL = 'ForearmL',\n  ForearmR = 'ForearmR',\n}\n\n\nexport enum ErrorCode {\n  SUCCESS,\n  MESSAGE_NOT_DEFINED,\n  CONNECTION_NOT_ESTABLISHED,\n  FAILED_TO_SEND_MESSAGE,\n  MESSAGE_INVALID,\n  MESSAGE_INVALID_DURATION_MILLIS,\n\n  MESSAGE_INVALID_DOT_INDEX_HEAD,\n  MESSAGE_INVALID_DOT_INDEX_ARM,\n  MESSAGE_INVALID_DOT_INDEX_VEST,\n\n  MESSAGE_INVALID_INTENSITY,\n  MESSAGE_INVALID_X,\n  MESSAGE_INVALID_Y,\n  MESSAGE_INVALID_ROTATION_X,\n  MESSAGE_INVALID_ROTATION_Y,\n  MESSAGE_INVALID_SCALE_INTENSITY_RATIO,\n  MESSAGE_INVALID_SCALE_DURATION_RATIO,\n  MESSAGE_NOT_REGISTERED_KEY,\n}\n\n","import { ErrorCode } from './Interfaces'\n\nconst DEFAULT_URL= 'ws://127.0.0.1:15881/v2/feedbacks?app_id=com.bhaptics.designer2&app_name=bHaptics Designer';\n\nexport enum STATUS {\n  CONNECTING = 'Connecting',\n  CONNECTED ='Connected',\n  DISCONNECT = 'Disconnected',\n}\n\nconst DEFAULT_RETRY_CONNECT_TIME = 5000;\n\nexport interface Message {\n  status: STATUS;\n  message: any;\n}\n\nexport default class PlayerSocket {\n  private handlers: Function[] = [];\n  private websocketClient: any;\n  private currentStatus: STATUS;\n  private message: any;\n  private isTriggered = false;\n\n  retryConnectTime: number;\n\n  constructor(retryConnectTime = DEFAULT_RETRY_CONNECT_TIME) {\n    this.message = {};\n    this.retryConnectTime = retryConnectTime;\n    this.currentStatus = STATUS.DISCONNECT;\n  }\n\n  public addListener = (func: (msg: Message) => void) => {\n    this.handlers.push(func);\n  };\n\n  private emit = (msg: Message) => {\n    this.handlers.forEach(func => {\n      func(msg);\n    })\n  };\n\n  connect = () => {\n    try  {\n      this.websocketClient = new WebSocket(DEFAULT_URL);\n    } catch (e) {\n      // connection failed\n      console.log('PlayerSocket', e);\n      return;\n    }\n\n    this.websocketClient.onopen = () => {\n      this.currentStatus = STATUS.CONNECTED;\n      this.emit( {\n        status: this.currentStatus,\n        message: this.message,\n      });\n    };\n\n    this.websocketClient.onmessage = (result: any) => {\n      if (JSON.stringify(this.message) === result.data) {\n        return;\n      }\n\n      this.message = JSON.parse(result.data);\n      this.emit({\n        status: this.currentStatus,\n        message: this.message,\n      });\n    };\n\n    this.websocketClient.onclose = (event: any) => {\n      this.currentStatus = STATUS.DISCONNECT;\n      this.emit( {\n        status: this.currentStatus,\n        message: this.message,\n      });\n      setTimeout(() => {\n        this.connect();\n      }, this.retryConnectTime);\n    };\n\n    this.currentStatus = STATUS.CONNECTING;\n    this.emit({\n      status: this.currentStatus,\n      message: this.message,\n    });\n  };\n\n  send = (message: string): ErrorCode => {\n    if (message === undefined) {\n      return ErrorCode.CONNECTION_NOT_ESTABLISHED;\n    }\n\n    if (!this.isTriggered) {\n      this.isTriggered = true;\n      this.connect();\n      return ErrorCode.CONNECTION_NOT_ESTABLISHED;\n    }\n\n    if (this.websocketClient === undefined) {\n      return ErrorCode.CONNECTION_NOT_ESTABLISHED;\n    }\n\n    if (this.currentStatus !== STATUS.CONNECTED) {\n      return ErrorCode.CONNECTION_NOT_ESTABLISHED;\n    }\n\n    try {\n      this.websocketClient.send(message);\n      return ErrorCode.SUCCESS;\n    } catch (e) {\n      // sending failed\n\n      return ErrorCode.FAILED_TO_SEND_MESSAGE;\n    }\n  }\n}\n\n","import PlayerSocket, { Message } from './PlayerSocket'\nimport {\n  DotPoint,\n  ErrorCode,\n  PathPoint,\n  PositionType,\n  RotationOption,\n  ScaleOption\n} from './Interfaces'\n\nclass HapticPlayer {\n  registeredKeys: string[] = []\n  socket: PlayerSocket;\n  constructor() {\n    this.socket = new PlayerSocket();\n    this.addListener((msg => {\n      if (msg.message.RegisteredKeys) {\n        this.registeredKeys = msg.message.RegisteredKeys;\n      }\n    }))\n  }\n\n  public addListener = (func: (msg: Message) => void) => {\n    this.socket.addListener(func);\n  };\n\n  public turnOff = (key: string) :ErrorCode => {\n    const request = {\n      Submit :[{\n        Type : 'turnOff',\n        Key : key,\n      }],\n    };\n    return this.socket.send(JSON.stringify(request));\n  };\n\n  public turnOffAll = () : ErrorCode => {\n    const request = {\n      Submit :[{\n        Type : 'turnOffAll',\n      }],\n    };\n    return this.socket.send(JSON.stringify(request));\n  };\n\n  public submitDot = (key: string,\n                      pos: PositionType,\n                      dotPoints: DotPoint[],\n                      durationMillis: number) : ErrorCode => {\n    if (isNaN(durationMillis)) {\n      return ErrorCode.MESSAGE_INVALID_DURATION_MILLIS;\n    }\n\n    if (durationMillis < 20 || durationMillis > 100000) {\n      return ErrorCode.MESSAGE_INVALID_DURATION_MILLIS;\n    }\n\n    if (dotPoints === undefined) {\n      return ErrorCode.MESSAGE_INVALID;\n    }\n\n    for (let i = 0; i < dotPoints.length; i++) {\n      const point = dotPoints[i];\n\n\n      switch (pos) {\n        case PositionType.ForearmL:\n        case PositionType.ForearmR:\n          if (isNaN(point.index)) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_ARM;\n          }\n\n          if (point.index < 0 || point.index >= 6) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_ARM;\n          }\n          break;\n        case PositionType.Head:\n          if (isNaN(point.index)) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_HEAD;\n          }\n\n          if (point.index < 0 || point.index >= 6) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_HEAD;\n          }\n          break;\n        case PositionType.VestBack:\n        case PositionType.VestFront:\n          if (isNaN(point.index)) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_VEST;\n          }\n\n          if (point.index < 0 || point.index >= 20) {\n            return ErrorCode.MESSAGE_INVALID_DOT_INDEX_VEST;\n          }\n          break;\n      }\n\n      if (isNaN(point.intensity)) {\n        return ErrorCode.MESSAGE_INVALID_INTENSITY;\n      }\n\n      if (point.intensity < 0 || point.intensity > 100) {\n        return ErrorCode.MESSAGE_INVALID_INTENSITY;\n      }\n    }\n\n    const request = {\n      Submit :[{\n        Type : 'frame',\n        Key : key,\n        Frame : {\n          Position : pos,\n          PathPoints: [],\n          DotPoints : dotPoints,\n          DurationMillis : durationMillis,\n        },\n      }],\n    };\n\n    return this.socket.send(JSON.stringify(request, (k, val) =>\n      val.toFixed ? Number(val.toFixed(3)) : val\n    ));\n  };\n\n  public submitPath = (key: string,\n                pos: PositionType,\n                pathPoints: PathPoint[],\n                durationMillis: number) : ErrorCode => {\n\n    if (isNaN(durationMillis)) {\n      return ErrorCode.MESSAGE_INVALID_DURATION_MILLIS;\n    }\n\n    if (durationMillis < 20 || durationMillis > 100000) {\n      return ErrorCode.MESSAGE_INVALID_DURATION_MILLIS;\n    }\n\n    if (pathPoints === undefined) {\n      return ErrorCode.MESSAGE_INVALID;\n    }\n\n    for (let i = 0; i < pathPoints.length; i++) {\n      const point = pathPoints[i];\n\n      if (isNaN(point.x)) {\n        return ErrorCode.MESSAGE_INVALID_X;\n      }\n\n      if (isNaN(point.y)) {\n        return ErrorCode.MESSAGE_INVALID_Y;\n      }\n\n      if (isNaN(point.intensity)) {\n        return ErrorCode.MESSAGE_INVALID_INTENSITY;\n      }\n\n      if (point.x < 0 || point.x > 1) {\n        return ErrorCode.MESSAGE_INVALID_X;\n      }\n\n      if (point.y < 0 || point.y > 1) {\n        return ErrorCode.MESSAGE_INVALID_Y;\n      }\n      if (point.intensity < 0 || point.intensity > 100) {\n        return ErrorCode.MESSAGE_INVALID_INTENSITY;\n      }\n    }\n\n\n    const request = {\n      Submit :[{\n        Type : 'frame',\n        Key : key,\n        Frame : {\n          Position : pos,\n          PathPoints : pathPoints,\n          DotPoints : [],\n          DurationMillis : durationMillis,\n        },\n      }],\n    };\n    return this.socket.send(JSON.stringify(request, (k, val) =>\n      val.toFixed ? Number(val.toFixed(3)) : val\n    ));\n  }\n\n  public registerFile = (key: string, json: string) : ErrorCode => {\n    const jsonData = JSON.parse(json);\n    const project = jsonData[\"project\"];\n    const request = {\n      Register: [{\n        Key: key,\n        project,\n      }]\n    };\n    return this.socket.send(JSON.stringify(request));\n  }\n\n  public submitRegistered = (key: string) : ErrorCode => {\n    if (this.registeredKeys.find(v => v === key) === undefined) {\n      return ErrorCode.MESSAGE_NOT_REGISTERED_KEY;\n    }\n\n\n    const request = {\n      Submit :[{\n        Type : 'key',\n        Key : key,\n      }],\n    };\n\n    return this.socket.send(JSON.stringify(request));\n  }\n\n  public submitRegisteredWithScaleOption = (key: string, scaleOption: ScaleOption) : ErrorCode => {\n    if (this.registeredKeys.find(v => v === key) === undefined) {\n      return ErrorCode.MESSAGE_NOT_REGISTERED_KEY;\n    }\n\n    if (isNaN(scaleOption.intensity)) {\n      return ErrorCode.MESSAGE_INVALID_SCALE_INTENSITY_RATIO;\n    }\n\n    if (scaleOption.intensity < 0.2 || scaleOption.intensity > 5) {\n      return ErrorCode.MESSAGE_INVALID_SCALE_INTENSITY_RATIO;\n    }\n\n    if (isNaN(scaleOption.duration)) {\n      return ErrorCode.MESSAGE_INVALID_SCALE_DURATION_RATIO;\n    }\n\n    if (scaleOption.duration < 0.2 || scaleOption.duration > 5) {\n      return ErrorCode.MESSAGE_INVALID_SCALE_DURATION_RATIO;\n    }\n\n    const request = {\n      Submit :[{\n        Type : 'key',\n        Key : key,\n        Parameters : {\n          scaleOption,\n        }\n      }],\n    };\n\n    return this.socket.send(JSON.stringify(request));\n  }\n\n  public submitRegisteredWithRotationOption = (key: string, rotationOption: RotationOption) : ErrorCode => {\n    if (this.registeredKeys.find(v => v === key) === undefined) {\n      return ErrorCode.MESSAGE_NOT_REGISTERED_KEY;\n    }\n\n    if (isNaN(rotationOption.offsetAngleX)) {\n      return ErrorCode.MESSAGE_INVALID_ROTATION_X;\n    }\n\n    if (rotationOption.offsetAngleX < 0 || rotationOption.offsetAngleX > 360) {\n      return ErrorCode.MESSAGE_INVALID_ROTATION_X;\n    }\n\n    if (isNaN(rotationOption.offsetY)) {\n      return ErrorCode.MESSAGE_INVALID_ROTATION_Y;\n    }\n\n    if (rotationOption.offsetY < -0.5 || rotationOption.offsetY > 0.5) {\n      return ErrorCode.MESSAGE_INVALID_ROTATION_Y;\n    }\n\n    const request = {\n      Submit :[{\n        Type : 'key',\n        Key : key,\n        Parameters : {\n          rotationOption,\n        }\n      }],\n    };\n\n    return this.socket.send(JSON.stringify(request));\n  }\n}\n\nexport default HapticPlayer;\n","import HapticPlayer from './HapticPlayer'\nimport { DotPoint, PathPoint, ScaleOption, RotationOption, PositionType, ErrorCode } from './Interfaces';\n\nconst tactJs = new HapticPlayer();\n\nexport default tactJs;\n\nclass TactJsUtils {\n  public static convertErrorCodeToString = (error: ErrorCode): string => {\n    switch (error) {\n      case ErrorCode.CONNECTION_NOT_ESTABLISHED:\n        return 'Connection is not established.'\n      case ErrorCode.FAILED_TO_SEND_MESSAGE:\n        return 'Failed to send a request to the bHaptics Player'\n      case ErrorCode.MESSAGE_NOT_DEFINED:\n        return 'Message is not defined';\n      case ErrorCode.MESSAGE_INVALID:\n        return 'Invalid input: Unknown';\n      case ErrorCode.MESSAGE_INVALID_DURATION_MILLIS:\n        return 'Invalid: durationMillis [20ms ~ 100,000ms]';\n      case ErrorCode.MESSAGE_INVALID_DOT_INDEX_VEST:\n        return 'Invalid: VestFront/Back index should be [0, 19]';\n      case ErrorCode.MESSAGE_INVALID_DOT_INDEX_ARM:\n        return 'Invalid: ArmLeft/Right index should be [0, 5]';\n      case ErrorCode.MESSAGE_INVALID_DOT_INDEX_HEAD:\n        return 'Invalid: Head index should be [0, 5]';\n      case ErrorCode.MESSAGE_INVALID_INTENSITY:\n        return 'Invalid: intensity should be [0, 100]';\n      case ErrorCode.MESSAGE_INVALID_X:\n        return 'Invalid: x should be [0, 1]';\n      case ErrorCode.MESSAGE_INVALID_Y:\n        return 'Invalid: y should be [0, 1]';\n      case ErrorCode.MESSAGE_INVALID_ROTATION_X:\n        return 'Invalid: rotationOffsetX should be [0, 360]';\n      case ErrorCode.MESSAGE_INVALID_ROTATION_Y:\n        return 'Invalid: offsetY should be [-0.5, 0.5]';\n      case ErrorCode.MESSAGE_INVALID_SCALE_INTENSITY_RATIO:\n        return 'Invalid: intensity should be [0.2, 5]';\n      case ErrorCode.MESSAGE_INVALID_SCALE_DURATION_RATIO:\n        return 'Invalid: duration should be [0.2, 5]';\n      case ErrorCode.MESSAGE_NOT_REGISTERED_KEY:\n        return 'Invalid: key not registered';\n      case ErrorCode.SUCCESS:\n        return 'Success';\n    }\n  }\n}\n\nexport {\n  DotPoint, PathPoint, ScaleOption, RotationOption, PositionType, ErrorCode, TactJsUtils\n}\n"],"names":["PositionType","ErrorCode"],"mappings":"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"}